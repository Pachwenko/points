import{s as $,n as Q,o as ee,r as te}from"../chunks/scheduler.XGLZWGdw.js";import{S as ae,i as se,e as W,a as G,f as y,g as p,s as k,h as m,j as P,c as N,x as L,k as l,y as i,A as I,B as S,m as le,n as ne,o as ie}from"../chunks/index.li6Z87Pf.js";import{g as X}from"../chunks/navigation.UR4SuMSN.js";function Y(n){let s,e,t,a,b,E="Display Name",U,o,D,r,f,O="Email",T,h,q,v,c,B="New Password",M,g,F,x,H="Save Changes",R,C,J="Sign out",z,K,u=n[1]&&Z(n);return{c(){s=p("div"),e=p("form"),u&&u.c(),t=k(),a=p("div"),b=p("label"),b.textContent=E,U=k(),o=p("input"),D=k(),r=p("div"),f=p("label"),f.textContent=O,T=k(),h=p("input"),q=k(),v=p("div"),c=p("label"),c.textContent=B,M=k(),g=p("input"),F=k(),x=p("button"),x.textContent=H,R=k(),C=p("button"),C.textContent=J,this.h()},l(d){s=m(d,"DIV",{class:!0});var w=P(s);e=m(w,"FORM",{class:!0});var _=P(e);u&&u.l(_),t=N(_),a=m(_,"DIV",{class:!0});var A=P(a);b=m(A,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),L(b)!=="svelte-e0rvjn"&&(b.textContent=E),U=N(A),o=m(A,"INPUT",{id:!0,name:!0,class:!0,placeholder:!0}),A.forEach(y),D=N(_),r=m(_,"DIV",{class:!0});var V=P(r);f=m(V,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),L(f)!=="svelte-9puw6w"&&(f.textContent=O),T=N(V),h=m(V,"INPUT",{id:!0,name:!0,class:!0,placeholder:!0}),V.forEach(y),q=N(_),v=m(_,"DIV",{class:!0});var j=P(v);c=m(j,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),L(c)!=="svelte-c9vn0y"&&(c.textContent=B),M=N(j),g=m(j,"INPUT",{id:!0,name:!0,class:!0,placeholder:!0}),j.forEach(y),F=N(_),x=m(_,"BUTTON",{class:!0,"data-svelte-h":!0}),L(x)!=="svelte-1ibyomg"&&(x.textContent=H),R=N(_),C=m(_,"BUTTON",{class:!0,"data-svelte-h":!0}),L(C)!=="svelte-1k2o8tq"&&(C.textContent=J),_.forEach(y),w.forEach(y),this.h()},h(){l(b,"for","display-name"),l(b,"class","block mb-2"),l(o,"id","display-name"),l(o,"name","display_name"),l(o,"class","w-full p-2 text-gray-900 bg-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"),l(o,"placeholder","Display Name"),l(a,"class","mb-4"),l(f,"for","email"),l(f,"class","block mb-2"),l(h,"id","email"),l(h,"name","email"),l(h,"class","w-full p-2 text-gray-900 bg-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"),l(h,"placeholder","me@example.com"),l(r,"class","mb-4"),l(c,"for","password"),l(c,"class","block mb-2"),l(g,"id","password"),l(g,"name","password"),l(g,"class","w-full p-2 text-gray-900 bg-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"),l(g,"placeholder","new password"),l(v,"class","mb-4"),l(x,"class","w-full p-3 bg-aqua text-white rounded-lg hover:bg-dim-aqua"),l(C,"class","w-full mt-4 p-3 bg-red-500 text-white rounded-lg hover:bg-red-600"),l(e,"class","p-6 rounded-lg w-full max-w-md"),l(s,"class","h-full flex justify-center items-center")},m(d,w){G(d,s,w),i(s,e),u&&u.m(e,null),i(e,t),i(e,a),i(a,b),i(a,U),i(a,o),I(o,n[2]),i(e,D),i(e,r),i(r,f),i(r,T),i(r,h),I(h,n[3]),i(e,q),i(e,v),i(v,c),i(v,M),i(v,g),I(g,n[4]),i(e,F),i(e,x),i(e,R),i(e,C),z||(K=[S(o,"input",n[7]),S(h,"input",n[8]),S(g,"input",n[9]),S(C,"click",n[6]),S(e,"submit",n[5])],z=!0)},p(d,w){d[1]?u?u.p(d,w):(u=Z(d),u.c(),u.m(e,t)):u&&(u.d(1),u=null),w&4&&o.value!==d[2]&&I(o,d[2]),w&8&&h.value!==d[3]&&I(h,d[3]),w&16&&g.value!==d[4]&&I(g,d[4])},d(d){d&&y(s),u&&u.d(),z=!1,te(K)}}}function Z(n){let s,e;return{c(){s=p("p"),e=le(n[1]),this.h()},l(t){s=m(t,"P",{class:!0});var a=P(s);e=ne(a,n[1]),a.forEach(y),this.h()},h(){l(s,"class","text-2xl text-center border border-2")},m(t,a){G(t,s,a),i(s,e)},p(t,a){a&2&&ie(e,t[1])},d(t){t&&y(s)}}}function oe(n){let s,e=n[0].session&&Y(n);return{c(){e&&e.c(),s=W()},l(t){e&&e.l(t),s=W()},m(t,a){e&&e.m(t,a),G(t,s,a)},p(t,[a]){t[0].session?e?e.p(t,a):(e=Y(t),e.c(),e.m(s.parentNode,s)):e&&(e.d(1),e=null)},i:Q,o:Q,d(t){t&&y(s),e&&e.d(t)}}}function re(n,s,e){let{data:t}=s,{supabase:a}=t,b="",E,U="",o="",D="",r="",f="";async function O(){o!==U&&(E?await t.supabase.from("profiles").update({display_name:o}).eq("id",t.session?.user.id):await a.from("profiles").insert({id:t.session?.user.id,display_name:o})),f&&await a.auth.updateUser({password:f}),r!==D&&(await a.auth.updateUser({email:r}),e(1,b+="Please go to your email and confirm the change."))}const T=async()=>{await a.auth.signOut(),X("/auth")};ee(async()=>{t.session||X("/auth");const{data:c}=await a.from("profiles").select("*").eq("id",t.session?.user.id).limit(1).single();c&&(E=c,e(2,o=E.display_name),U=o);const{data:{user:B}}=await a.auth.getUser();B&&(e(3,r=B.email),D=r)});function h(){o=this.value,e(2,o)}function q(){r=this.value,e(3,r)}function v(){f=this.value,e(4,f)}return n.$$set=c=>{"data"in c&&e(0,t=c.data)},n.$$.update=()=>{n.$$.dirty&1&&({supabase:a}=t)},[t,b,o,r,f,O,T,h,q,v]}class ce extends ae{constructor(s){super(),se(this,s,re,oe,$,{data:0})}}export{ce as component};
