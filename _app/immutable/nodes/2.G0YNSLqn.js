import{s as G,n as M,e as J,o as K}from"../chunks/scheduler.k-kUyWhY.js";import{S as Q,i as X,e as T,a as P,f as g,g as v,s as L,h as y,j as C,y as N,c as U,k as I,x as p,z as Y,A as F,m as w,n as S,o as A}from"../chunks/index.uKyVMVU-.js";import{w as Z}from"../chunks/singletons.QgQTIIDG.js";import{g as $}from"../chunks/navigation.57qXH2xT.js";function D(a){return a?.length!==void 0?a:Array.from(a)}const ee=Z([]);function V(a,e,t){const l=a.slice();return l[6]=e[t],l}function q(a,e,t){const l=a.slice();return l[9]=e[t],l}function z(a){let e,t,l="Welcome to spring Pointing!",i,n,s,u="Start new Pointing Session",r,o,c,k,O;function R(f,h){return f[2]?le:te}let j=R(a),b=j(a),m=a[1]&&B(a),E=D(a[3]),_=[];for(let f=0;f<E.length;f+=1)_[f]=W(V(a,E,f));return{c(){e=v("div"),t=v("h1"),t.textContent=l,i=L(),b.c(),n=L(),s=v("button"),s.textContent=u,r=L(),m&&m.c(),o=L(),c=v("ul");for(let f=0;f<_.length;f+=1)_[f].c();this.h()},l(f){e=y(f,"DIV",{class:!0});var h=C(e);t=y(h,"H1",{"data-svelte-h":!0}),N(t)!=="svelte-1aajuir"&&(t.textContent=l),i=U(h),b.l(h),n=U(h),s=y(h,"BUTTON",{class:!0,"data-svelte-h":!0}),N(s)!=="svelte-ymknhj"&&(s.textContent=u),r=U(h),m&&m.l(h),o=U(h),c=y(h,"UL",{class:!0});var d=C(c);for(let x=0;x<_.length;x+=1)_[x].l(d);d.forEach(g),h.forEach(g),this.h()},h(){I(s,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"),I(c,"class","mt-4 w-full max-w-md"),I(e,"class","container bg-gray-900 text-white p-8 min-h-screen flex flex-col justify-center items-center")},m(f,h){P(f,e,h),p(e,t),p(e,i),b.m(e,null),p(e,n),p(e,s),p(e,r),m&&m.m(e,null),p(e,o),p(e,c);for(let d=0;d<_.length;d+=1)_[d]&&_[d].m(c,null);k||(O=Y(s,"click",a[4]),k=!0)},p(f,h){if(j===(j=R(f))&&b?b.p(f,h):(b.d(1),b=j(f),b&&(b.c(),b.m(e,n))),f[1]?m?m.p(f,h):(m=B(f),m.c(),m.m(e,o)):m&&(m.d(1),m=null),h&8){E=D(f[3]);let d;for(d=0;d<E.length;d+=1){const x=V(f,E,d);_[d]?_[d].p(x,h):(_[d]=W(x),_[d].c(),_[d].m(c,null))}for(;d<_.length;d+=1)_[d].d(1);_.length=E.length}},d(f){f&&g(e),b.d(),m&&m.d(),F(_,f),k=!1,O()}}}function te(a){let e,t="Current display name: loading...";return{c(){e=v("p"),e.textContent=t},l(l){e=y(l,"P",{"data-svelte-h":!0}),N(e)!=="svelte-u9upty"&&(e.textContent=t)},m(l,i){P(l,e,i)},p:M,d(l){l&&g(e)}}}function le(a){let e,t,l=a[2].display_name+"",i;return{c(){e=v("p"),t=w("Current display name: "),i=w(l)},l(n){e=y(n,"P",{});var s=C(e);t=S(s,"Current display name: "),i=S(s,l),s.forEach(g)},m(n,s){P(n,e,s),p(e,t),p(e,i)},p(n,s){s&4&&l!==(l=n[2].display_name+"")&&A(i,l)},d(n){n&&g(e)}}}function B(a){let e,t,l,i=D(a[1]),n=[];for(let s=0;s<i.length;s+=1)n[s]=H(q(a,i,s));return{c(){e=v("div"),t=w(`Previous Sessions:
            `),l=v("ul");for(let s=0;s<n.length;s+=1)n[s].c()},l(s){e=y(s,"DIV",{});var u=C(e);t=S(u,`Previous Sessions:
            `),l=y(u,"UL",{});var r=C(l);for(let o=0;o<n.length;o+=1)n[o].l(r);r.forEach(g),u.forEach(g)},m(s,u){P(s,e,u),p(e,t),p(e,l);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(l,null)},p(s,u){if(u&2){i=D(s[1]);let r;for(r=0;r<i.length;r+=1){const o=q(s,i,r);n[r]?n[r].p(o,u):(n[r]=H(o),n[r].c(),n[r].m(l,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=i.length}},d(s){s&&g(e),F(n,s)}}}function H(a){let e,t,l=a[9].id+"",i,n,s=a[9].last_updated+"",u,r;return{c(){e=v("li"),t=v("a"),i=w(l),n=w(" - "),u=w(s),this.h()},l(o){e=y(o,"LI",{});var c=C(e);t=y(c,"A",{href:!0});var k=C(t);i=S(k,l),n=S(k," - "),u=S(k,s),k.forEach(g),c.forEach(g),this.h()},h(){I(t,"href",r="/points/"+a[9].id+"/")},m(o,c){P(o,e,c),p(e,t),p(t,i),p(t,n),p(t,u)},p(o,c){c&2&&l!==(l=o[9].id+"")&&A(i,l),c&2&&s!==(s=o[9].last_updated+"")&&A(u,s),c&2&&r!==(r="/points/"+o[9].id+"/")&&I(t,"href",r)},d(o){o&&g(e)}}}function W(a){let e,t=a[6]+"",l;return{c(){e=v("li"),l=w(t),this.h()},l(i){e=y(i,"LI",{class:!0});var n=C(e);l=S(n,t),n.forEach(g),this.h()},h(){I(e,"class","bg-gray-800 p-3 border-2 border-blue-500 rounded mb-2")},m(i,n){P(i,e,n),p(e,l)},p(i,n){n&8&&t!==(t=i[6]+"")&&A(l,t)},d(i){i&&g(e)}}}function ne(a){let e,t=a[0].session&&z(a);return{c(){t&&t.c(),e=T()},l(l){t&&t.l(l),e=T()},m(l,i){t&&t.m(l,i),P(l,e,i)},p(l,[i]){l[0].session?t?t.p(l,i):(t=z(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:M,o:M,d(l){l&&g(e),t&&t.d(l)}}}function se(a,e,t){let l;J(a,ee,o=>t(3,l=o));let{data:i}=e,{supabase:n}=i,s,u;async function r(){const{data2:o,error:c}=await n.from("PointingSession").insert({last_updated:new Date().toISOString(),player_data:{},users:i?.session.user.id});console.log("started new session",o,c)}return K(async()=>{i.session||$("/auth");const{data:o}=await n.from("PointingSession").select("*").limit(10);o&&o.length>0&&t(1,s=o);const{data2:c}=await n.from("profiles").select("*").limit(1);c&&c.length>0?t(2,u=c[0]):t(2,u={display_name:"default"})}),a.$$set=o=>{"data"in o&&t(0,i=o.data)},a.$$.update=()=>{a.$$.dirty&1&&({supabase:n}=i)},[i,s,u,l,r]}class fe extends Q{constructor(e){super(),X(this,e,se,ne,G,{data:0})}}export{fe as component};
