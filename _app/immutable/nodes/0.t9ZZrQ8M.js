import{c as P}from"../chunks/index.GQbBJPuZ.js";import{s as j,c as J,u as M,g as U,d as D,o as L}from"../chunks/scheduler.k-kUyWhY.js";import{S as K,i as $,d as R,t as z}from"../chunks/index.8oxJKiNT.js";import{i as B}from"../chunks/navigation.8a9JcXl1.js";const X="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im90bnJqc3VpcHJqcGJqdndzeXJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDI1OTkzODcsImV4cCI6MjAxODE3NTM4N30.RZp9Y6FAhq9M2QK7AAq0eLsq-9QZ0kUZIKfS0Q8M-MM",Z="https://otnrjsuiprjpbjvwsyrv.supabase.co";new TextEncoder;const F=new TextDecoder,q=t=>{const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r},H=t=>{let e=t;e instanceof Uint8Array&&(e=F.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return q(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}},Q=H;var Y=Object.create,C=Object.defineProperty,G=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyNames,V=Object.getPrototypeOf,W=Object.prototype.hasOwnProperty,ee=(t,e)=>function(){return e||(0,t[O(t)[0]])((e={exports:{}}).exports,e),e.exports},te=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of O(e))!W.call(t,n)&&n!==r&&C(t,n,{get:()=>e[n],enumerable:!(o=G(e,n))||o.enumerable});return t},A=(t,e,r)=>(r=t!=null?Y(V(t)):{},te(e||!t||!t.__esModule?C(r,"default",{value:t,enumerable:!0}):r,t)),E=ee({"../../node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js"(t){t.parse=o,t.serialize=n;var e=Object.prototype.toString,r=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(i,h){if(typeof i!="string")throw new TypeError("argument str must be a string");for(var _={},s=h||{},y=s.decode||a,f=0;f<i.length;){var c=i.indexOf("=",f);if(c===-1)break;var d=i.indexOf(";",f);if(d===-1)d=i.length;else if(d<c){f=i.lastIndexOf(";",c-1)+1;continue}var v=i.slice(f,c).trim();if(_[v]===void 0){var g=i.slice(c+1,d).trim();g.charCodeAt(0)===34&&(g=g.slice(1,-1)),_[v]=u(g,y)}f=d+1}return _}function n(i,h,_){var s=_||{},y=s.encode||l;if(typeof y!="function")throw new TypeError("option encode is invalid");if(!r.test(i))throw new TypeError("argument name is invalid");var f=y(h);if(f&&!r.test(f))throw new TypeError("argument val is invalid");var c=i+"="+f;if(s.maxAge!=null){var d=s.maxAge-0;if(isNaN(d)||!isFinite(d))throw new TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(d)}if(s.domain){if(!r.test(s.domain))throw new TypeError("option domain is invalid");c+="; Domain="+s.domain}if(s.path){if(!r.test(s.path))throw new TypeError("option path is invalid");c+="; Path="+s.path}if(s.expires){var v=s.expires;if(!p(v)||isNaN(v.valueOf()))throw new TypeError("option expires is invalid");c+="; Expires="+v.toUTCString()}if(s.httpOnly&&(c+="; HttpOnly"),s.secure&&(c+="; Secure"),s.priority){var g=typeof s.priority=="string"?s.priority.toLowerCase():s.priority;switch(g){case"low":c+="; Priority=Low";break;case"medium":c+="; Priority=Medium";break;case"high":c+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(s.sameSite){var T=typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite;switch(T){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return c}function a(i){return i.indexOf("%")!==-1?decodeURIComponent(i):i}function l(i){return encodeURIComponent(i)}function p(i){return e.call(i)==="[object Date]"||i instanceof Date}function u(i,h){try{return h(i)}catch{return i}}}}),k=A(E()),I=A(E());function b(t){if(!t)return null;try{const e=JSON.parse(t);if(!e)return null;if(e.constructor.name==="Object")return e;if(e.constructor.name!=="Array")throw new Error(`Unexpected format: ${e.constructor.name}`);const[r,o,n]=e[0].split("."),a=Q(o),l=new TextDecoder,{exp:p,sub:u,...i}=JSON.parse(l.decode(a));return{expires_at:p,expires_in:p-Math.round(Date.now()/1e3),token_type:"bearer",access_token:e[0],refresh_token:e[1],provider_token:e[2],provider_refresh_token:e[3],user:{id:u,factors:e[4],...i}}}catch(e){return console.warn("Failed to parse cookie string:",e),null}}function re(t){var e;return JSON.stringify([t.access_token,t.refresh_token,t.provider_token,t.provider_refresh_token,((e=t.user)==null?void 0:e.factors)??null])}function m(){return typeof window<"u"&&typeof window.document<"u"}var w={path:"/",sameSite:"lax",maxAge:60*60*24*365*1e3};function N(t){return new RegExp(".{1,"+t+"}","g")}var x=3180,oe=N(x);function ne(t,e,r){const o=r!==void 0?N(r):oe;if(Math.ceil(e.length/(r??x))===1)return[{name:t,value:e}];const a=[],l=e.match(o);return l?.forEach((p,u)=>{const i=`${t}.${u}`;a.push({name:i,value:p})}),a}function ie(t,e=()=>null){let r=[];for(let o=0;;o++){const n=`${t}.${o}`,a=e(n);if(!a)break;r.push(a)}return r.length?r.join(""):null}var ae=class{constructor(t){this.cookieOptions={...w,...t,maxAge:w.maxAge}}getItem(t){const e=this.getCookie(t);if(t.endsWith("-code-verifier")&&e)return e;if(e)return JSON.stringify(b(e));const r=ie(t,o=>this.getCookie(o));return r!==null?JSON.stringify(b(r)):null}setItem(t,e){if(t.endsWith("-code-verifier")){this.setCookie(t,e);return}let r=JSON.parse(e);const o=re(r);ne(t,o).forEach(a=>{this.setCookie(a.name,a.value)})}removeItem(t){this._deleteSingleCookie(t),this._deleteChunkedCookies(t)}_deleteSingleCookie(t){this.getCookie(t)&&this.deleteCookie(t)}_deleteChunkedCookies(t,e=0){for(let r=e;;r++){const o=`${t}.${r}`;if(this.getCookie(o)===void 0)break;this.deleteCookie(o)}}},se=class extends ae{constructor(t){super(t)}getCookie(t){return m()?(0,k.parse)(document.cookie)[t]:null}setCookie(t,e){if(!m())return null;document.cookie=(0,k.serialize)(t,e,{...this.cookieOptions,httpOnly:!1})}deleteCookie(t){if(!m())return null;document.cookie=(0,k.serialize)(t,"",{...this.cookieOptions,maxAge:0,httpOnly:!1})}};function ce(t,e,r){var o;const n=m();return P(t,e,{...r,auth:{flowType:"pkce",autoRefreshToken:n,detectSessionInUrl:n,persistSession:!0,storage:r.auth.storage,...(o=r.auth)!=null&&o.storageKey?{storageKey:r.auth.storageKey}:{}}})}I.parse;I.serialize;/*! Bundled license information:

cookie/index.js:
  (*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/var ue=class extends se{constructor(t=null,e){super(e),this.serverSession=t}getItem(t){return m()?super.getItem(t):JSON.stringify(this.serverSession)}},S;function le({supabaseUrl:t,supabaseKey:e,event:r,serverSession:o,options:n,cookieOptions:a}){var l;const p=m();if(p&&S)return S;const u=ce(t,e,{...n,global:{fetch:r.fetch,...n?.global,headers:{...(l=n?.global)==null?void 0:l.headers,"X-Client-Info":"@supabase/auth-helpers-sveltekit@0.10.7"}},auth:{storage:new ue(o,a)}});return p&&(S=u),u}const pe=async({fetch:t,data:e,depends:r})=>{r("supabase:auth");const o=le({supabaseUrl:Z,supabaseKey:X,event:{fetch:t},serverSession:e.session}),{data:{session:n}}=await o.auth.getSession();return{supabase:o,session:n}},fe="auto",ye=Object.freeze(Object.defineProperty({__proto__:null,load:pe,prerender:fe},Symbol.toStringTag,{value:"Module"}));function de(t){let e;const r=t[2].default,o=J(r,t,t[1],null);return{c(){o&&o.c()},l(n){o&&o.l(n)},m(n,a){o&&o.m(n,a),e=!0},p(n,[a]){o&&o.p&&(!e||a&2)&&M(o,r,n,n[1],e?D(r,n[1],a,null):U(n[1]),null)},i(n){e||(R(o,n),e=!0)},o(n){z(o,n),e=!1},d(n){o&&o.d(n)}}}function he(t,e,r){let{$$slots:o={},$$scope:n}=e,{data:a}=e,{supabase:l,session:p}=a;return L(()=>{const{data:{subscription:u}}=l.auth.onAuthStateChange((i,h)=>{h?.expires_at!==p?.expires_at&&B("supabase:auth")});return()=>u.unsubscribe()}),t.$$set=u=>{"data"in u&&r(0,a=u.data),"$$scope"in u&&r(1,n=u.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&({supabase:l,session:p}=a)},[a,n,o]}class ke extends K{constructor(e){super(),$(this,e,he,de,j,{data:0})}}export{ke as component,ye as universal};
